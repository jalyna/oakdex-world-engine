{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.tsx","webpack:///./node_modules/react/index.js","webpack:///./src/getNextCoordinates.ts","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/react/cjs/react.production.min.js","webpack:///./src/CharData.ts","webpack:///./src/draw.ts","webpack:///./src/drawChar.ts","webpack:///./src/timeout.ts","webpack:///./src/getDir.ts","webpack:///./src/calculateViewport.ts","webpack:///./src/isNextFieldWalkable.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","CharData_1","draw_1","timeout_1","getNextCoordinates_1","getDir_1","calculateViewport_1","isNextFieldWalkable_1","Direction","TILE_SIZE","FRAMES_PER_STEP","FRAME_DURATION","default","Component","[object Object]","props","super","this","canvas","createRef","state","chars","getInitialCharState","controllableChar","concat","map","pressedKey","otherPressedKeys","onKeyDown","onKeyUp","tick","moveChar","changeCharDir","top","left","viewport","mapData","createElement","style","overflow","width","height","position","imageRendering","backgroundImage","mapBackgroundImage","ref","hoverChar","find","id","x","y","onPressEnter","assign","nextCoordinates","nextChar","walkThrough","lookNotInDirection","changeChar","dir","getOppositeDir","e","pressEnter","setState","slice","interval","window","setInterval","filter","lastKey","length","charId","Promise","resolve","setTimeout","options","async","char","progressFrame","animationFrame","msPerFrame","finishStep","redraw","document","addEventListener","actionHandler","disableMovement","disabledMovement","enableMovement","onLoaded","clearInterval","removeEventListener","changeControllableChar","newFields","oldCoordinates","onOver","overChar","onWalksTo","prev","special","specialTiles","next","looksAt","prevX","prevY","triggerOnWalksTo","clearAnimation","nextCharAnimation","nextCharProgress","current","_1","Left","Right","Down","Up","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","test1","String","getOwnPropertyNames","test2","fromCharCode","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","TypeError","toObject","arguments","k","for","q","u","v","w","z","aa","ba","A","iterator","B","a","b","encodeURIComponent","g","h","f","Error","replace","framesToPop","ca","C","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","D","E","context","refs","updater","F","G","isReactComponent","forceUpdate","H","constructor","isPureReactComponent","I","J","K","L","__self","__source","M","children","Array","defaultProps","$$typeof","type","_owner","N","O","P","Q","pop","result","keyPrefix","func","count","R","push","U","S","T","isArray","done","=",":","escape","toString","ea","fa","V","da","W","X","Children","toArray","only","PureComponent","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","forwardRef","render","lazy","_ctor","_status","_result","memo","compare","useCallback","useContext","useEffect","useImperativeHandle","useDebugValue","useLayoutEffect","useMemo","useReducer","useRef","useState","Fragment","StrictMode","Suspense","cloneElement","createFactory","isValidElement","version","unstable_ConcurrentMode","unstable_Profiler","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","ReactCurrentOwner","Y","Z","drawChar_1","loadedImages","currentMap","loadImage","src","img","Image","onload","charStates","ctx","getContext","title","all","mapForegroundImage","image","loadImages","then","clearRect","sort","charState","drawImage","foreground","CHAR_SIZE","frame","calculateCharsetOffset","Math","floor","font","textAlign","fillStyle","fillText","ms","clamp","min","max","fieldData","some","right","bottom","walkability","getFieldData"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import * as React from 'react'\n\nimport { MapData, Walkability } from './MapData'\nimport { Char, CharState, getInitialCharState } from './CharData'\nimport draw from './draw'\nimport timeout from './timeout'\nimport getNextCoordinates from './getNextCoordinates'\nimport getDir, { getOppositeDir } from './getDir'\nimport calculateViewport from './calculateViewport'\nimport isNextFieldWalkable from './isNextFieldWalkable'\n\nexport { MapData, CharState, Walkability }\n\nexport interface Coordinates {\n  x: number,\n  y: number\n}\n\nexport enum Direction {\n  Up = 1,\n  Down = 2,\n  Left = 3,\n  Right = 4\n}\n\nexport interface CoordinatesWithSpecial extends Coordinates {\n  special: string\n}\n\nexport interface CoordinatesWithLooksAt extends CoordinatesWithSpecial {\n  looksAt: Coordinates\n}\n\nexport interface CoordinateChange {\n  prev: CoordinatesWithSpecial,\n  next: CoordinatesWithLooksAt\n}\n\nexport interface Viewport {\n  width: number,\n  height: number\n}\n\ninterface MoveCharOptions {\n  msPerFrame?: number\n}\n\nexport interface ActionHandler {\n  moveChar: (charId: string, dir: Direction, options?: MoveCharOptions) => Promise<boolean>,\n  changeCharDir: (charId: string, dir: Direction) => Promise<undefined>,\n  disableMovement: () => void,\n  enableMovement: () => void\n}\n\nexport interface WorldEngineProps {\n  mapData: MapData,\n  viewport: Viewport,\n  controllableChar: Char,\n  chars: Char[],\n  onWalksTo?: (charId: string, change: CoordinateChange) => void,\n  onPressEnter?: (charId: string, triggeredChar: CharState) => void,\n  onOver?: (charId: string, triggeredChar: CharState) => void,\n  onLoaded?: (actionHandler: ActionHandler) => void\n}\n\nexport interface WorldEngineState {\n  chars: CharState[],\n  pressedKey: Direction | null,\n  otherPressedKeys: Direction[],\n  disabledMovement?: boolean\n}\n\nexport const TILE_SIZE = 16\nexport const FRAMES_PER_STEP = 3\nexport const FRAME_DURATION = 90\n\nexport default class WorldEngine extends React.Component<WorldEngineProps, WorldEngineState> {\n  constructor (props: WorldEngineProps) {\n    super(props)\n    this.state = {\n      chars: [getInitialCharState(props.controllableChar)].concat(props.chars.map((c) => getInitialCharState(c))),\n      pressedKey: null,\n      otherPressedKeys: []\n    }\n    this.onKeyDown = this.onKeyDown.bind(this)\n    this.onKeyUp = this.onKeyUp.bind(this)\n    this.tick = this.tick.bind(this)\n    this.moveChar = this.moveChar.bind(this)\n    this.changeCharDir = this.changeCharDir.bind(this)\n  }\n\n  private canvas = React.createRef<HTMLCanvasElement>()\n  private interval: number | null\n  private actionHandler: ActionHandler\n\n  render () {\n    const { top, left } = calculateViewport(this.props.viewport, this.props.mapData, this.controllableChar)\n    return (\n      <div style={{\n        overflow: 'hidden',\n        width: this.props.viewport.width * TILE_SIZE,\n        height: this.props.viewport.height * TILE_SIZE,\n        position: 'relative'\n      }}>\n        <div style={{\n          position: 'absolute',\n          left: left,\n          top: top\n        }}>\n          <div style={{\n            position: 'relative',\n            imageRendering: 'pixelated',\n            width: this.props.mapData.width * TILE_SIZE,\n            height: this.props.mapData.height * TILE_SIZE,\n            backgroundImage: 'url(' + this.props.mapData.mapBackgroundImage + ')'\n          }}>\n            <canvas\n              ref={this.canvas}\n              width={this.props.mapData.width * TILE_SIZE}\n              height={this.props.mapData.height * TILE_SIZE}\n              style={{ imageRendering: 'pixelated', position: 'absolute' }} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  pressEnter () {\n    const hoverChar = this.state.chars.find((c) => c.id !== this.controllableChar.id && c.x === this.controllableChar.x && c.y === this.controllableChar.y)\n    if (hoverChar && this.props.onPressEnter) {\n      this.props.onPressEnter(this.controllableChar.id, { ...hoverChar })\n    }\n    const nextCoordinates = getNextCoordinates(this.state.chars)\n    const nextChar = this.state.chars.find((c) => c.x === nextCoordinates.x && c.y === nextCoordinates.y && !c.walkThrough)\n    if (nextChar) {\n      if (!nextChar.lookNotInDirection) {\n        this.changeChar(nextChar.id, { dir: getOppositeDir(this.controllableChar.dir) })\n      }\n      if (this.props.onPressEnter) {\n        this.props.onPressEnter(this.controllableChar.id, { ...nextChar })\n      }\n    }\n  }\n\n  onKeyDown (e: KeyboardEvent) {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this.pressEnter()\n      return\n    }\n\n    const dir = getDir(e)\n\n    if (!dir) {\n      return\n    }\n\n    this.setState({\n      pressedKey: dir,\n      otherPressedKeys: this.state.otherPressedKeys.slice()\n        .concat(this.state.pressedKey ? [this.state.pressedKey] : null)\n    })\n\n    if (!this.interval) {\n      this.tick()\n      this.interval = window.setInterval(this.tick, FRAME_DURATION)\n    }\n  }\n\n  onKeyUp (e: KeyboardEvent) {\n    let dir = getDir(e)\n\n    if (!dir) {\n      return\n    }\n\n    let otherPressedKeys = this.state.otherPressedKeys.slice().filter((d) => d !== dir)\n    const lastKey = otherPressedKeys[otherPressedKeys.length - 1]\n    otherPressedKeys = otherPressedKeys.filter((d) => d !== lastKey)\n\n    this.setState({\n      pressedKey: lastKey || null,\n      otherPressedKeys\n    })\n  }\n\n  changeCharDir (charId: string, dir: Direction): Promise<undefined> {\n    return new Promise((resolve) => {\n      this.changeChar(charId, { dir })\n      setTimeout(resolve, FRAME_DURATION)\n    })\n  }\n\n  moveChar (charId: string, dir: Direction, options?: MoveCharOptions): Promise<boolean> {\n    options = options || {}\n    return new Promise(async(resolve) => {\n      const char = this.state.chars.find((c) => c.id === charId)\n      if (!char) {\n        resolve(false)\n        return\n      }\n      if (char.dir !== dir) {\n        await this.changeCharDir(charId, dir)\n      }\n\n      if (!isNextFieldWalkable(this.props.mapData, this.state.chars, charId)) {\n        resolve(false)\n        return\n      }\n\n      for (let i = 1; i < FRAMES_PER_STEP; i++) {\n        this.changeChar(charId, { progressFrame: i, animationFrame: i })\n        await timeout(options.msPerFrame || FRAME_DURATION)\n      }\n      this.finishStep(char.id)\n      await timeout(options.msPerFrame || FRAME_DURATION)\n      resolve(true)\n    })\n  }\n\n  componentDidMount () {\n    this.redraw()\n    document.addEventListener('keydown', this.onKeyDown)\n    document.addEventListener('keyup', this.onKeyUp)\n    this.interval = window.setInterval(this.tick, FRAME_DURATION)\n    this.actionHandler = {\n      moveChar: this.moveChar,\n      changeCharDir: this.changeCharDir,\n      disableMovement: () => this.setState({ disabledMovement: true }),\n      enableMovement: () => this.setState({ disabledMovement: false })\n    }\n    if (this.props.onLoaded) {\n      this.props.onLoaded(this.actionHandler)\n    }\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.interval)\n    this.interval = null\n    document.removeEventListener('keydown', this.onKeyDown)\n    document.removeEventListener('keyup', this.onKeyUp)\n  }\n\n  componentDidUpdate () {\n    this.redraw()\n  }\n\n  nextCharProgress () {\n    if (this.controllableChar.progressFrame === FRAMES_PER_STEP - 1) {\n      this.finishStep()\n      return\n    }\n    this.changeControllableChar({\n      progressFrame: this.controllableChar.progressFrame + 1,\n      animationFrame: this.controllableChar.animationFrame + 1\n    })\n  }\n\n  nextCharAnimation () {\n    if (this.controllableChar.animationFrame === FRAMES_PER_STEP - 1) {\n      this.changeControllableChar({ animationFrame: 0 })\n      return\n    }\n    this.changeControllableChar({\n      animationFrame: this.controllableChar.animationFrame + 1\n    })\n  }\n\n  get controllableChar (): CharState {\n    return this.state.chars[0]\n  }\n\n  changeControllableChar (newFields: object) {\n    this.setState({\n      chars: [{\n        ...this.controllableChar,\n        ...newFields\n      }].concat(this.state.chars.slice(1, this.state.chars.length))\n    })\n  }\n\n  changeChar (charId: string, newFields: object) {\n    const chars = this.state.chars.slice().map((c) => {\n      if (c.id === charId) {\n        return {\n          ...c,\n          ...newFields\n        }\n      }\n      return c\n    })\n    this.setState({ chars })\n  }\n\n  clearAnimation () {\n    clearInterval(this.interval)\n    this.interval = null\n  }\n\n  triggerOnWalksTo (charId: string, oldCoordinates: Coordinates) {\n    if (this.props.onOver) {\n      const overChar = this.state.chars.find((c) => c.id !== this.controllableChar.id && c.x === this.controllableChar.x && c.y === this.controllableChar.y)\n      if (overChar) {\n        this.props.onOver(charId, { ...overChar })\n      }\n    }\n    if (!this.props.onWalksTo) {\n      return\n    }\n    this.props.onWalksTo(charId, {\n      prev: {\n        ...oldCoordinates,\n        special: this.props.mapData.specialTiles[oldCoordinates.y][oldCoordinates.x] || null \n      },\n      next: {\n        looksAt: getNextCoordinates(this.state.chars),\n        x: this.controllableChar.x,\n        y: this.controllableChar.y,\n        special: this.props.mapData.specialTiles[this.controllableChar.y][this.controllableChar.x] || null\n      }\n    })\n  }\n\n  finishStep (charId?: string) {\n    let char = this.controllableChar\n    if (charId) {\n      char = this.state.chars.find((c) => c.id === charId)\n    }\n    const { x, y } = getNextCoordinates(this.state.chars, char.id)\n    const prevX = char.x\n    const prevY = char.y\n    this.changeChar(char.id, { x, y, progressFrame: 0, animationFrame: 0 })\n    this.triggerOnWalksTo(char.id, { x: prevX, y: prevY })\n  }\n\n  tick () {\n    // in-between, animate\n    if (this.controllableChar.progressFrame !== 0) {\n      this.nextCharProgress()\n      return\n    }\n    if (this.controllableChar.animationFrame !== 0) {\n      this.nextCharAnimation()\n      return\n    }\n    // Final Step => clear interval\n    if (!this.state.pressedKey) {\n      this.clearAnimation()\n      return\n    }\n    // Forbid Movement\n    if (this.state.disabledMovement) {\n      return\n    }\n    // First press => change dir only\n    if (this.controllableChar.dir !== this.state.pressedKey) {\n      this.changeControllableChar({ dir: this.state.pressedKey })\n      this.triggerOnWalksTo(this.controllableChar.id, { x: this.controllableChar.x, y: this.controllableChar.y })\n      return\n    }\n    // Can not walk to next field\n    if (!isNextFieldWalkable(this.props.mapData, this.state.chars, this.controllableChar.id)) {\n      this.changeControllableChar({\n        animationFrame: 1\n      })\n      return\n    }\n    // Second press => start to walk\n    this.changeControllableChar({\n      progressFrame: 1,\n      animationFrame: 1\n    })\n  }\n\n  redraw () {\n    if (!this.canvas.current) {\n      return\n    }\n    draw(\n      this.canvas.current,\n      this.props.mapData,\n      this.state.chars\n    )\n  }\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","import { Coordinates, CharState, Direction } from '.'\n\nexport default function (chars: CharState[], charId?: string): Coordinates {\n  let char = chars[0]\n  if (charId) {\n    char = chars.find((c) => c.id === charId)\n  }\n  let x = char.x\n  let y = char.y\n  switch (char.dir) {\n    case Direction.Left:\n      x = x - 1\n      break\n    case Direction.Right:\n      x = x + 1\n      break\n    case Direction.Down:\n      y = y + 1\n      break\n    case Direction.Up:\n      y = y - 1\n      break\n  }\n  return { x, y }\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v16.8.4\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var k=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.concurrent_mode\"):60111,y=n?Symbol.for(\"react.forward_ref\"):60112,z=n?Symbol.for(\"react.suspense\"):60113,aa=n?Symbol.for(\"react.memo\"):\n60115,ba=n?Symbol.for(\"react.lazy\"):60116,A=\"function\"===typeof Symbol&&Symbol.iterator;function ca(a,b,d,c,e,g,h,f){if(!a){a=void 0;if(void 0===b)a=Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var l=[d,c,e,g,h,f],m=0;a=Error(b.replace(/%s/g,function(){return l[m++]}));a.name=\"Invariant Violation\"}a.framesToPop=1;throw a;}}\nfunction B(a){for(var b=arguments.length-1,d=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=0;c<b;c++)d+=\"&args[]=\"+encodeURIComponent(arguments[c+1]);ca(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",d)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};\nfunction E(a,b,d){this.props=a;this.context=b;this.refs=D;this.updater=d||C}E.prototype.isReactComponent={};E.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?B(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,d){this.props=a;this.context=b;this.refs=D;this.updater=d||C}var H=G.prototype=new F;\nH.constructor=G;k(H,E.prototype);H.isPureReactComponent=!0;var I={current:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,d){var c=void 0,e={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=b[c]);var f=arguments.length-2;if(1===f)e.children=d;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];e.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===e[c]&&(e[c]=f[c]);return{$$typeof:p,type:a,key:g,ref:h,props:e,_owner:J.current}}\nfunction da(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,d,c){if(P.length){var e=P.pop();e.result=a;e.keyPrefix=b;e.func=d;e.context=c;e.count=0;return e}return{result:a,keyPrefix:b,func:d,context:c,count:0}}\nfunction R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}\nfunction S(a,b,d,c){var e=typeof a;if(\"undefined\"===e||\"boolean\"===e)a=null;var g=!1;if(null===a)g=!0;else switch(e){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return d(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var h=0;h<a.length;h++){e=a[h];var f=b+T(e,h);g+=S(e,f,d,c)}else if(null===a||\"object\"!==typeof a?f=null:(f=A&&a[A]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),h=\n0;!(e=a.next()).done;)e=e.value,f=b+T(e,h++),g+=S(e,f,d,c);else\"object\"===e&&(d=\"\"+a,B(\"31\",\"[object Object]\"===d?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":d,\"\"));return g}function U(a,b,d){return null==a?0:S(a,\"\",b,d)}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function ea(a,b){a.func.call(a.context,b,a.count++)}\nfunction fa(a,b,d){var c=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?V(a,c,d,function(a){return a}):null!=a&&(N(a)&&(a=da(a,e+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+d)),c.push(a))}function V(a,b,d,c,e){var g=\"\";null!=d&&(g=(\"\"+d).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,e);U(a,fa,b);R(b)}function W(){var a=I.current;null===a?B(\"307\"):void 0;return a}\nvar X={Children:{map:function(a,b,d){if(null==a)return a;var c=[];V(a,c,null,b,d);return c},forEach:function(a,b,d){if(null==a)return a;b=Q(null,null,b,d);U(a,ea,b);R(b)},count:function(a){return U(a,function(){return null},null)},toArray:function(a){var b=[];V(a,b,null,function(a){return a});return b},only:function(a){N(a)?void 0:B(\"143\");return a}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,\n_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:y,render:a}},lazy:function(a){return{$$typeof:ba,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:aa,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,\nb,d){return W().useImperativeHandle(a,b,d)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,d){return W().useReducer(a,b,d)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,StrictMode:t,Suspense:z,createElement:M,cloneElement:function(a,b,d){null===a||void 0===a?B(\"267\",a):void 0;var c=void 0,e=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=\nb){void 0!==b.ref&&(h=b.ref,f=J.current);void 0!==b.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)e.children=d;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];e.children=l}return{$$typeof:p,type:a.type,key:g,ref:h,props:e,_owner:f}},createFactory:function(a){var b=M.bind(null,a);b.type=a;return b},isValidElement:N,version:\"16.8.4\",\nunstable_ConcurrentMode:x,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentOwner:J,assign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z;\n","import { Direction, Coordinates } from '.'\n\nexport interface Char extends Coordinates {\n  id: string,\n  image: string,\n  name?: string,\n  dir?: Direction,\n  walkThrough?: boolean,\n  lookNotInDirection?: boolean\n}\n\nexport interface CharState extends Char {\n  dir: Direction,\n  animationFrame: number,\n  progressFrame: number\n}\n\nexport function getInitialCharState (char: Char): CharState {\n  return {\n    ...char,\n    dir: char.dir || Direction.Down,\n    animationFrame: 0,\n    progressFrame: 0\n  }\n}\n","import { MapData, CharState } from '.'\nimport drawChar from './drawChar'\n\ninterface LoadedImages {\n  [key: string]: HTMLImageElement\n}\n\nlet loadedImages = {} as LoadedImages\nlet currentMap = null as null | string\n\nfunction loadImage (key: string, src: string) {\n  return new Promise((resolve) => {\n    if (loadedImages[key]) {\n      resolve()\n      return\n    }\n    const img = new Image()\n    img.src = src\n    loadedImages[key] = img\n    img.onload = () => resolve()\n  })\n}\n\nfunction loadImages (mapData: MapData, chars: CharState[]) {\n  if (currentMap !== mapData.title) {\n    loadedImages = {}\n    currentMap = mapData.title\n  }\n\n  return Promise.all([\n    loadImage('foreground', mapData.mapForegroundImage)\n  ].concat(chars.map((c) => loadImage('char-' + c.id, c.image))))\n}\n\nexport default function (canvas: HTMLCanvasElement, mapData: MapData, charStates: CharState[]) {\n  const ctx = canvas.getContext('2d')\n\n  loadImages(mapData, charStates).then(() => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n    const sortedCharStates = charStates.slice().sort((a, b) => {\n      if (a.walkThrough === b.walkThrough) {\n        return a.y <= b.y ? -1 : 1\n      }\n      return a.walkThrough ? -1 : 1\n    })\n    sortedCharStates.forEach((charState) => {\n      drawChar(ctx, loadedImages['char-' + charState.id], charState)\n    })\n    ctx.drawImage(\n      loadedImages.foreground,\n      0, 0, canvas.width, canvas.height,\n      0, 0, canvas.width, canvas.height\n    )\n  })\n}\n","import { CharState, TILE_SIZE, FRAMES_PER_STEP, Direction } from '.'\n\ninterface Offsets {\n  top: number,\n  left: number\n}\n\nconst CHAR_SIZE = 32\n\nfunction calculateCharsetOffset (dir: Direction, frame: number): Offsets {\n  let top = CHAR_SIZE * 0\n  let left = CHAR_SIZE * 1\n  switch (dir) {\n    case Direction.Left:\n      top = CHAR_SIZE * 1\n      break\n    case Direction.Right:\n      top = CHAR_SIZE * 2\n      break\n    case Direction.Up:\n      top = CHAR_SIZE * 3\n      break\n  }\n  if (frame !== 0) {\n    if (frame%2 === 0) {\n      left = CHAR_SIZE * 0\n    } else {\n      left = CHAR_SIZE * 2\n    }\n  }\n  return {\n    top,\n    left\n  }\n}\n\nexport default function drawChar (ctx: CanvasRenderingContext2D, image: HTMLImageElement, charState: CharState) {\n  const { top, left } = calculateCharsetOffset(charState.dir || Direction.Down, charState.animationFrame)\n  let x = charState.x * TILE_SIZE\n  let y = charState.y * TILE_SIZE\n\n  if (charState.progressFrame < FRAMES_PER_STEP) {\n    switch (charState.dir) {\n      case Direction.Left:\n        x = x - Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n      case Direction.Right:\n        x = x + Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n      case Direction.Down:\n        y = y + Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n      case Direction.Up:\n        y = y - Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n    }\n  }\n\n  ctx.drawImage(\n    image,\n    left, top, CHAR_SIZE, CHAR_SIZE,\n    x - 8, y - 16, CHAR_SIZE, CHAR_SIZE\n  )\n\n  if (charState.name) {\n    ctx.font = 'normal 8px Verdana'\n    ctx.textAlign = 'center'\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)'\n    ctx.fillText(charState.name, x + 8, y + 24, 100)\n  }\n}\n","export default function timeout (ms: number): Promise<undefined> {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n","import { Direction } from '.'\n\nexport function getOppositeDir (dir: Direction): Direction {\n  switch (dir) {\n    case Direction.Left:\n      return Direction.Right\n    case Direction.Right:\n      return Direction.Left\n    case Direction.Down:\n      return Direction.Up\n    case Direction.Up:\n      return Direction.Down\n  }\n}\n\nexport default function (e: KeyboardEvent): Direction | null {\n  switch (e.key) {\n    case 'ArrowUp':\n    case 'w':\n      return Direction.Up\n    case 'ArrowDown':\n    case 's':\n      return Direction.Down\n    case 'ArrowLeft':\n    case 'a':\n      return Direction.Left\n    case 'ArrowRight':\n    case 'd':\n      return Direction.Right\n  }\n\n  return null\n}\n","import { TILE_SIZE, FRAMES_PER_STEP, Viewport, MapData, CharState, Direction } from '.'\n\nexport interface Offsets {\n  top: number,\n  left: number\n}\n\nfunction clamp (value: number, min: number, max: number): number {\n  if (value < min) return min\n  else if (value > max) return max\n  return value\n}\n\nexport default function (viewport: Viewport, mapData: MapData, charState: CharState): Offsets {\n  let y = charState.y * TILE_SIZE\n  let x = charState.x * TILE_SIZE\n\n  if (charState.progressFrame < FRAMES_PER_STEP) {\n    switch (charState.dir) {\n      case Direction.Left:\n        x = x - Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n      case Direction.Right:\n        x = x + Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n      case Direction.Down:\n        y = y + Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n      case Direction.Up:\n        y = y - Math.floor(charState.progressFrame / FRAMES_PER_STEP * TILE_SIZE)\n        break\n    }\n  }\n\n  return {\n    top: clamp(-y + (viewport.height * TILE_SIZE)/2, -(mapData.height * TILE_SIZE) + (viewport.height * TILE_SIZE), 0),\n    left: clamp(-x + (viewport.width * TILE_SIZE)/2, -(mapData.width * TILE_SIZE) + (viewport.width * TILE_SIZE), 0)\n  }\n}\n","import { CharState, Walkability, MapData, Direction } from '.'\nimport getNextCoordinates from './getNextCoordinates'\n\nfunction getFieldData (mapData: MapData, chars: CharState[], x: number, y: number): Walkability {\n  const existingChar = chars.some((c) => c.x === x && c.y === y && !c.walkThrough)\n  if (existingChar) {\n    return {\n      top: 1,\n      left: 1,\n      right: 1,\n      bottom: 1\n    }\n  }\n  return mapData.walkability[y][x]\n}\n\nexport default function (mapData: MapData, chars: CharState[], charId: string): boolean {\n  const { x, y } = getNextCoordinates(chars, charId)\n  const fieldData = getFieldData(mapData, chars, x, y)\n  const char = chars.find((c) => c.id === charId)\n  switch (char.dir) {\n    case Direction.Left:\n      return fieldData.right === 0\n    case Direction.Right:\n      return fieldData.left === 0\n    case Direction.Down:\n      return fieldData.top === 0\n    case Direction.Up:\n      return fieldData.bottom === 0\n  }\n  return false\n}\n"],"sourceRoot":""}